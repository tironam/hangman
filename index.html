<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Hangman</title>
</head>
<body>
    <h5>Hangman</h5>
    <p id="winLose"></p>
    <p id="instructions"></p>
    <p>Guesses: <span id="guesses"></span></p>
    <p id="word"></p>
    <p>wins: <span id="wins"></span></p>
    <p>losses: <span id="losses"></span></p>

    <script>

        // Array of potential words
        const words = ['pizza', 'hamburger', 'hotdog', 'burrito', 'spaghetti', 'taco']
        // You want the chosenWord in the global scope
        // String to hold word to be guessed
        let chosenWord = ''
        // array of already guessed letters
        let lettersGuessed = []
        // Number of available guesses
        let guesses = 10
        // number of game losses
        let losses = 0
        // Number of game wins
        let wins = 0
        // Boolean of game statwe
        let isOver = false

        // function to display the word
        const displayWord = () => {
            let isWin = true
            let wordDisp = ' '
            // loop over the word and create characters
            for (let i = 0; i < chosenWord.length; i++) {
                //display the letter if already guessed
                if (lettersGuessed.indexOf(chosenWord[i]) !== -1) {
                    wordDisp += chosenWord[i]
                    // Otherwise display a blank
                } else {
                    isWin = false
                    wordDisp += '_ '
                }
            }
            // show current progression of word
            document.getElementById('word').innerHTML = wordDisp
            // Checks to see if all letters have been guessed
            if (isWin) {
                // Changes game state to over and increases wins
                isOver = true
                wins++
                document.getElementById('wins').textContent = wins
                document.getElementById('winLose').textContent = 'Congrats! You won!'
                document.getElementById('instructions').textContent = 'Press enter to play a new game'
            }
        }

        // start new word and original game state
        const newRound = () => {
            // set initial values for game variables
            isOver = false
            guesses = 10
            lettersGuessed = []
            // Chooses a new random word
            chosenWord = words[Math.floor(Math.random() * words.length)]
            // console.log(chosenWord)
            // Render current word state
            displayWord()
            // Reset display info
            document.getElementById('winLose').textContent = ''
            document.getElementById('instructions').textContent = ''
            document.getElementById('guesses').textContent = guesses
            document.getElementById('losses').textContent = losses
            document.getElementById('wins').textContent = wins
        }

            //  key press event listener
            document.onkeydown = event => {
                // Check letter if already guessed and game is not over
                if (!isOver && event.keyCode >= 65 && 
                    event.keyCode <= 90 &&
                    lettersGuessed.indexOf(event.key) === -1) {
                    // add key to already guessed letters
                    lettersGuessed.push(event.key)
                    // check to make sure guessed letter is in word
                    if (chosenWord.indexOf(event.key) !== -1) {
                        displayWord()
                        // If guessed wrong...
                    } else {
                        guesses --
                       document.getElementById('guesses').textContent = guesses
                    //    Lose game if out of guesses
                       if (guesses <= 0) {
                        //    Set game state to over and increase losses
                            AisOver = true
                            losses++
                            document.getElementById('losses').textContent = losses
                           document.getElementById('winLose').textContent = 'Oh no! You lost!'
                           document.getElementById('instructions').textContent = 'Press enter to play a new game'
                       }
                    } 
                // Handles enter key
                } else if (event.keyCode === 13 && isOver) {
                    newRound()
                }
            }

                // Starts new round
            newRound()

    </script>
</body>
</html>